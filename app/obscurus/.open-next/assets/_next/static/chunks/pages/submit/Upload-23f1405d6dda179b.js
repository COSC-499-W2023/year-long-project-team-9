(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{2148:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/submit/Upload",function(){return r(9541)}])},5186:function(e,t,r){"use strict";r.d(t,{X:function(){return useCurrentTheme}});var i=r(2010);let useCurrentTheme=e=>{let{theme:t}=(0,i.F)();return"primary"===e?"dark"===t||"system"===t?"#F8FAFC":"#0F172A":"background"==e?"dark"===t||"system"===t?"#0F172A":"#F8FAFC":void 0}},6367:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var i=r(5893),n=r(7294),s=r(9102),o=r(2003),a=r(5919);let c=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,i.jsx)(s.f,{ref:t,className:(0,a.cn)(c(),r),...n})});d.displayName=s.f.displayName},9541:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return g},default:function(){return submit_Upload}});var i=r(5893),n=r(4211),s=r(7294),o=r(6367),a=r(9922),c=r(1664),d=r.n(c),l=r(5186),u=r(4970),h=r.n(u),f=r(1163),p=r.n(f),m=r(4297);let _=(0,m.Z)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),v=(0,m.Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var g=!0,submit_Upload=e=>{let{url:t}=e,[r,c]=(0,s.useState)(void 0),u=(0,s.useRef)(null),handleSubmit=async e=>{var r,i;e.preventDefault();let n=null===(i=u.current)||void 0===i?void 0:null===(r=i.files)||void 0===r?void 0:r[0];if(c(n),!n){console.error("No file selected");return}let s=encodeURIComponent(n.name),o=await fetch(t,{method:"PUT",headers:{"Content-Type":n.type,"Content-Disposition":"attachment; filename*=UTF-8''".concat(s)},body:n});if(!o.ok){console.error("Upload failed:",o.statusText);return}let a=o.headers.get("Location")||t.split("?")[0];window.location.href=a,console.log("Upload successful:",a)},[f,m]=(0,s.useState)(!1),g=(0,s.useRef)(null),b=(0,s.useRef)(null),[y,x]=(0,s.useState)(!1),[w,j]=(0,s.useState)([]),handleDataAvailable=e=>{e.data&&e.data.size>0&&j(t=>t.concat(e.data))},handleSaveAndUpload=async()=>{if(w.length){let e=new Blob(w,{type:"video/webm"}),r=new File([e],"webcam-video.webm",{type:"video/webm"});try{let e=await fetch(t,{method:"PUT",headers:{"Content-Type":"video/webm"},body:r});if(e.ok){let r=e.headers.get("Location")||t.split("?")[0];window.location.href=r,console.log("Upload successful:",r)}else console.error("Upload failed:",e.statusText)}catch(e){console.error("Upload error:",e)}}},S=(0,l.X)("primary"),U=(0,l.X)("background");return(0,i.jsx)(n.Z,{children:(0,i.jsxs)("div",{className:"grid  justify-items-center items-center p-10 gap-10",children:[(0,i.jsxs)("svg",{width:"50%",height:"60",viewBox:"0 0 856 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("rect",{x:"259",y:"24",width:"568",height:"13",fill:"#CBD5E1"}),(0,i.jsx)("rect",{x:"49",y:"24",width:"160",height:"12.8",fill:S}),(0,i.jsx)(d(),{href:"/submit",children:(0,i.jsx)("circle",{cx:"30",cy:"30",r:"27",fill:S,stroke:S,"stroke-width":"6"})}),(0,i.jsx)("circle",{cx:"826",cy:"30",r:"27",fill:U,stroke:"#CBD5E1","stroke-width":"6"}),(0,i.jsx)("circle",{cx:"627",cy:"30",r:"27",fill:U,stroke:"#CBD5E1","stroke-width":"6"}),(0,i.jsx)("circle",{cx:"428",cy:"30",r:"27",fill:U,stroke:"#CBD5E1","stroke-width":"6"}),(0,i.jsx)("circle",{cx:"229",cy:"30",r:"27",fill:U,stroke:S,"stroke-width":"6"})]}),(0,i.jsx)("div",{className:"text-3xl font-bold pt-10",children:"Upload or Record Your Video"}),f?(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)(h(),{audio:!1,ref:g}),(0,i.jsx)("div",{className:"flex flex-row justify-evenly p-10",children:y?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>{b.current.stop(),x(!1)},children:(0,i.jsx)(_,{})}),(0,i.jsx)(a.z,{onClick:handleSaveAndUpload,disabled:!w.length,children:"Upload"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>{x(!0),b.current=new MediaRecorder(g.current.stream,{mimeType:"video/webm"}),b.current.addEventListener("dataavailable",handleDataAvailable),b.current.start()},children:(0,i.jsx)(v,{className:"fill-red-500 stroke-none"})}),(0,i.jsx)(a.z,{onClick:handleSaveAndUpload,disabled:!w.length,children:"Upload"})]})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"grid justify-items-center border-dashed border-black border rounded-lg w-[500px] bg-secondary dark:border-white",children:(0,i.jsx)("form",{onSubmit:handleSubmit,className:"",children:(0,i.jsxs)("div",{className:"grid w-full gap-10 h-full  max-w-sm items-center rounded-xl p-10",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","shape-rendering":"geometricPrecision","text-rendering":"geometricPrecision","image-rendering":"optimizeQuality",viewBox:"0 0 512 364.92",width:150,fill:S,className:"justify-self-center",children:(0,i.jsx)("path",{"fill-rule":"nonzero",d:"M359.34 124.66c-13.56 6.7-25.71 15.36-37.41 24.9l-20.13-23.03c14.81-13.74 32.08-24.49 50.64-32.39-37.56-66.54-128.4-83.94-188.3-37.42-21.75 16.84-38.26 42.04-44.61 75.42l-2 10.43-10.4 1.84c-10.19 1.78-19.29 4.24-27.27 7.36-49.8 19.27-63.78 74.7-33.31 116.79 13.04 17.91 29.66 36.17 51.47 39.21h30.49c-.21 3-.32 6.02-.32 9.07 0 7.34.62 14.53 1.82 21.53H97.53l-1.92-.17c-30.53-3.88-55.62-26.61-73.75-51.72C-20.41 228.28.4 149.83 68.93 123.25c7.15-2.79 14.8-5.12 22.86-6.99 9.15-36.34 28.65-64.32 53.72-83.74C222.7-27.29 338.58-1.8 382.79 86.08c6.65-1.05 13.31-1.58 19.92-1.5 98.9.73 138.01 127.2 86.69 195.33-20.57 27.29-52.12 50.51-84.61 58.05l-3.41.41h-19.81a128.362 128.362 0 0 0 1.5-30.6h16.61c24.15-5.81 49.91-25.68 65.23-46.16 36.46-48.56 10.58-146.05-62.41-146.51-14.26-.12-29.11 3.33-43.16 9.56zM234.73 364.92h42.56c9.95 0 18.11-8.16 18.11-18.11v-58.64h31.04c6.54-.28 11.18-2.44 13.87-6.52 7.27-10.91-2.66-21.68-9.55-29.27-19.55-21.46-53.22-53.23-62.87-64.59-7.32-8.08-17.72-8.08-25.04 0-9.97 11.64-44.84 45.77-63.43 66.64-6.45 7.27-14.42 17.17-7.72 27.22 2.76 4.08 7.35 6.24 13.89 6.52h31.04v58.64c0 9.84 8.15 18.11 18.1 18.11z"})}),(0,i.jsx)("div",{className:"flex justify-center w-full",children:(0,i.jsx)(o._,{htmlFor:"video",className:"text-xl font-bold text-center",children:r?"Selected file: ".concat(r.name):"No file selected."})}),(0,i.jsx)("input",{id:"file-input",type:"file",ref:u,style:{display:"none"},onChange:handleSubmit}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-10",children:[(0,i.jsx)("input",{id:"file-input",type:"file",ref:u,style:{display:"none"},onChange:handleSubmit}),(0,i.jsx)("div",{className:"justify-self-start",children:(0,i.jsx)(a.z,{className:" font-extrabold",onClick:()=>{var e;null===(e=u.current)||void 0===e||e.click()},children:"Upload"})}),(0,i.jsx)("div",{className:"justify-self-end",children:(0,i.jsx)(a.z,{className:" font-extrabold",onClick:()=>m(!0),children:"Record"})})]}),(0,i.jsxs)("div",{className:"grid items-center text-sm justify-items-center w-full",children:[(0,i.jsx)("div",{className:"font-semibold text-base",children:"Accepted filetypes:"}),(0,i.jsxs)("div",{className:"text-base text-center",children:[" ","MP4, WMV, MOV, and AV1"]})]})]})})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 justify-evenly gap-72",children:[(0,i.jsx)(a.z,{type:"submit",className:" px-8 font-extrabold",onClick:()=>p().back,children:"Back"}),(0,i.jsx)(a.z,{type:"submit",className:" px-8 font-extrabold",onClick:()=>p().push("/submit/Upload"),children:"Next"})]})]})]})})}},4970:function(e,t,r){var i;e.exports=(i=r(7294),function(e){var t={};function __nested_webpack_require_620__(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,__nested_webpack_require_620__),i.l=!0,i.exports}return __nested_webpack_require_620__.m=e,__nested_webpack_require_620__.c=t,__nested_webpack_require_620__.d=function(e,t,r){__nested_webpack_require_620__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__nested_webpack_require_620__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__nested_webpack_require_620__.t=function(e,t){if(1&t&&(e=__nested_webpack_require_620__(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__nested_webpack_require_620__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__nested_webpack_require_620__.d(r,i,(function(t){return e[t]}).bind(null,i));return r},__nested_webpack_require_620__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __nested_webpack_require_620__.d(t,"a",t),t},__nested_webpack_require_620__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_620__.p="",__nested_webpack_require_620__(__nested_webpack_require_620__.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,r){"use strict";r.r(t);var i,n=r(/*! react */"react"),s=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function __(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__rest=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};function hasGetUserMedia(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}"undefined"!=typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise(function(r,i){t.call(navigator,e,r,i)}):Promise.reject(Error("getUserMedia is not implemented in this browser"))}));var o=function(e){function Webcam(t){var r=e.call(this,t)||this;return r.canvas=null,r.ctx=null,r.requestUserMediaId=0,r.unmounted=!1,r.state={hasUserMedia:!1},r}return s(Webcam,e),Webcam.prototype.componentDidMount=function(){var e=this.state,t=this.props;if(this.unmounted=!1,!hasGetUserMedia()){t.onUserMediaError("getUserMedia not supported");return}e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")},Webcam.prototype.componentDidUpdate=function(e){var t=this.props;if(!hasGetUserMedia()){t.onUserMediaError("getUserMedia not supported");return}var r=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),i=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),n=e.minScreenshotWidth!==t.minScreenshotWidth,s=e.minScreenshotHeight!==t.minScreenshotHeight;(i||n||s)&&(this.canvas=null,this.ctx=null),(r||i)&&(this.stopAndCleanup(),this.requestUserMedia())},Webcam.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},Webcam.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map(function(t){e.removeTrack(t),t.stop()}),e.getAudioTracks().map(function(t){e.removeTrack(t),t.stop()})):e.stop())},Webcam.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(Webcam.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},Webcam.prototype.getScreenshot=function(e){var t=this.state,r=this.props;if(!t.hasUserMedia)return null;var i=this.getCanvas(e);return i&&i.toDataURL(r.screenshotFormat,r.screenshotQuality)},Webcam.prototype.getCanvas=function(e){var t=this.state,r=this.props;if(!this.video||!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var i=this.video.videoWidth,n=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var s=i/n;n=(i=r.minScreenshotWidth||this.video.clientWidth)/s,r.minScreenshotHeight&&n<r.minScreenshotHeight&&(i=(n=r.minScreenshotHeight)*s)}this.canvas=document.createElement("canvas"),this.canvas.width=(null==e?void 0:e.width)||i,this.canvas.height=(null==e?void 0:e.height)||n,this.ctx=this.canvas.getContext("2d")}var o=this.ctx,a=this.canvas;return o&&a&&(a.width=(null==e?void 0:e.width)||a.width,a.height=(null==e?void 0:e.height)||a.height,r.mirrored&&(o.translate(a.width,0),o.scale(-1,1)),o.imageSmoothingEnabled=r.imageSmoothing,o.drawImage(this.video,0,0,(null==e?void 0:e.width)||a.width,(null==e?void 0:e.height)||a.height),r.mirrored&&(o.scale(-1,1),o.translate(-a.width,0))),a},Webcam.prototype.requestUserMedia=function(){var e=this,t=this.props,sourceSelected=function(r,i){var n={video:void 0===i||i};t.audio&&(n.audio=void 0===r||r),e.requestUserMediaId++;var s=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(n).then(function(t){e.unmounted||s!==e.requestUserMediaId?Webcam.stopMediaStream(t):e.handleUserMedia(null,t)}).catch(function(t){e.handleUserMedia(t)})};if("mediaDevices"in navigator)sourceSelected(t.audioConstraints,t.videoConstraints);else{var optionalSource_1=function(e){return{optional:[{sourceId:e}]}},constraintToSourceId_1=function(e){var t=e.deviceId;return"string"==typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"==typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources(function(e){var r=null,i=null;e.forEach(function(e){"audio"===e.kind?r=e.id:"video"===e.kind&&(i=e.id)});var n=constraintToSourceId_1(t.audioConstraints);n&&(r=n);var s=constraintToSourceId_1(t.videoConstraints);s&&(i=s),sourceSelected(optionalSource_1(r),optionalSource_1(i))})}},Webcam.prototype.handleUserMedia=function(e,t){var r=this.props;if(e||!t){this.setState({hasUserMedia:!1}),r.onUserMediaError(e);return}this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(e){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}r.onUserMedia(t)},Webcam.prototype.render=function(){var e=this,t=this.state,r=this.props,i=r.audio,s=(r.forceScreenshotSourceSize,r.disablePictureInPicture),o=(r.onUserMedia,r.onUserMediaError,r.screenshotFormat,r.screenshotQuality,r.minScreenshotWidth,r.minScreenshotHeight,r.audioConstraints,r.videoConstraints,r.imageSmoothing,r.mirrored),a=r.style,c=void 0===a?{}:a,d=r.children,l=__rest(r,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),u=o?__assign(__assign({},c),{transform:(c.transform||"")+" scaleX(-1)"}):c,h={getScreenshot:this.getScreenshot.bind(this)};return n.createElement(n.Fragment,null,n.createElement("video",__assign({autoPlay:!0,disablePictureInPicture:s,src:t.src,muted:!i,playsInline:!0,ref:function(t){e.video=t},style:u},l)),d&&d(h))},Webcam.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},Webcam}(n.Component);t.default=o},react:function(e,t){e.exports=i}}).default)},9102:function(e,t,r){"use strict";r.d(t,{f:function(){return a}});var i=r(7462),n=r(7294),s=r(5320);let o=(0,n.forwardRef)((e,t)=>(0,n.createElement)(s.WV.label,(0,i.Z)({},e,{ref:t,onMouseDown:t=>{var r;null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}}))),a=o}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2148)}),_N_E=e.O()}]);