"use strict";(()=>{var e={};e.id=571,e.ids=[571,888,660],e.modules={316:(e,t,r)=>{r.d(t,{Z:()=>i});var s=r(4297);let i=(0,s.Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},6179:(e,t,r)=>{r.d(t,{Z:()=>i});var s=r(4297);let i=(0,s.Z)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]])},7076:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>f,default:()=>p,getServerSideProps:()=>h,getStaticPaths:()=>m,getStaticProps:()=>x,reportWebVitals:()=>g,routeModule:()=>k,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>b});var i=r(7093),a=r(5244),l=r(1323),o=r(1269),n=r(2292),c=r(8233),d=e([n,c]);[n,c]=d.then?(await d)():d;let u=i.PagesRouteModule,p=(0,l.l)(c,"default"),x=(0,l.l)(c,"getStaticProps"),m=(0,l.l)(c,"getStaticPaths"),h=(0,l.l)(c,"getServerSideProps"),f=(0,l.l)(c,"config"),g=(0,l.l)(c,"reportWebVitals"),b=(0,l.l)(c,"unstable_getStaticProps"),j=(0,l.l)(c,"unstable_getStaticPaths"),y=(0,l.l)(c,"unstable_getStaticParams"),v=(0,l.l)(c,"unstable_getServerProps"),w=(0,l.l)(c,"unstable_getServerSideProps"),k=new u({definition:{kind:a.x.PAGES,page:"/submit/Upload",pathname:"/submit/Upload",bundlePath:"",filename:""},components:{App:n.default,Document:o.default},userland:c});s()}catch(e){s(e)}})},5186:(e,t,r)=>{r.d(t,{X:()=>useCurrentTheme});var s=r(1162);let useCurrentTheme=e=>{let{theme:t}=(0,s.useTheme)();return"primary"===e?"dark"===t||"system"===t?"#F8FAFC":"#0F172A":"background"==e?"dark"===t||"system"===t?"#0F172A":"#F8FAFC":void 0}},6367:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.d(t,{_:()=>u});var i=r(997),a=r(6689),l=r(49),o=r(6926),n=r(8804),c=e([l,o,n]);[l,o,n]=c.then?(await c)():c;let d=(0,o.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=a.forwardRef(({className:e,...t},r)=>i.jsx(l.Root,{ref:r,className:(0,n.cn)(d(),e),...t}));u.displayName=l.Root.displayName,s()}catch(e){s(e)}})},1269:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Document});var s=r(997),i=r(6859);function Document(){return(0,s.jsxs)(i.Html,{lang:"en",children:[s.jsx(i.Head,{}),(0,s.jsxs)("body",{children:[s.jsx(i.Main,{}),s.jsx(i.NextScript,{})]})]})}},8233:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__,getServerSideProps:()=>getServerSideProps});var i=r(997),a=r(2255),l=r(6113),o=r.n(l),n=r(4204),c=r(6936),d=r(1841),u=r(6689),p=r(6367),x=r(9922),m=r(1664),h=r.n(m),f=r(5186),g=r(7250),b=r.n(g),j=r(1163),y=r.n(j),v=r(6179),w=r(316),k=e([a,n,p,x]);async function getServerSideProps(){let e=new d.PutObjectCommand({ACL:"public-read",Key:o().randomUUID(),Bucket:n.Bucket.public.bucketName}),t=await (0,c.getSignedUrl)(new d.S3Client({}),e);return{props:{url:t}}}[a,n,p,x]=k.then?(await k)():k;let __WEBPACK_DEFAULT_EXPORT__=({url:e})=>{let[t,r]=(0,u.useState)(void 0),s=(0,u.useRef)(null),handleSubmit=async t=>{t.preventDefault();let i=s.current?.files?.[0];if(r(i),!i){console.error("No file selected");return}let a=encodeURIComponent(i.name),l=await fetch(e,{method:"PUT",headers:{"Content-Type":i.type,"Content-Disposition":`attachment; filename*=UTF-8''${a}`},body:i});if(!l.ok){console.error("Upload failed:",l.statusText);return}let o=l.headers.get("Location")||e.split("?")[0];window.location.href=o,console.log("Upload successful:",o)},[l,o]=(0,u.useState)(!1),n=(0,u.useRef)(null),c=(0,u.useRef)(null),[d,m]=(0,u.useState)(!1),[g,j]=(0,u.useState)([]),handleDataAvailable=e=>{e.data&&e.data.size>0&&j(t=>t.concat(e.data))},handleSaveAndUpload=async()=>{if(g.length){let t=new Blob(g,{type:"video/webm"}),r=new File([t],"webcam-video.webm",{type:"video/webm"});try{let t=await fetch(e,{method:"PUT",headers:{"Content-Type":"video/webm"},body:r});if(t.ok){let r=t.headers.get("Location")||e.split("?")[0];window.location.href=r,console.log("Upload successful:",r)}else console.error("Upload failed:",t.statusText)}catch(e){console.error("Upload error:",e)}}},k=(0,f.X)("primary"),S=(0,f.X)("background");return i.jsx(a.Z,{children:(0,i.jsxs)("div",{className:"grid  justify-items-center items-center p-10 gap-10",children:[(0,i.jsxs)("svg",{width:"50%",height:"60",viewBox:"0 0 856 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("rect",{x:"259",y:"24",width:"568",height:"13",fill:"#CBD5E1"}),i.jsx("rect",{x:"49",y:"24",width:"160",height:"12.8",fill:k}),i.jsx(h(),{href:"/submit",children:i.jsx("circle",{cx:"30",cy:"30",r:"27",fill:k,stroke:k,"stroke-width":"6"})}),i.jsx("circle",{cx:"826",cy:"30",r:"27",fill:S,stroke:"#CBD5E1","stroke-width":"6"}),i.jsx("circle",{cx:"627",cy:"30",r:"27",fill:S,stroke:"#CBD5E1","stroke-width":"6"}),i.jsx("circle",{cx:"428",cy:"30",r:"27",fill:S,stroke:"#CBD5E1","stroke-width":"6"}),i.jsx("circle",{cx:"229",cy:"30",r:"27",fill:S,stroke:k,"stroke-width":"6"})]}),i.jsx("div",{className:"text-3xl font-bold pt-10",children:"Upload or Record Your Video"}),l?(0,i.jsxs)("div",{className:"",children:[i.jsx(b(),{audio:!1,ref:n}),i.jsx("div",{className:"flex flex-row justify-evenly p-10",children:d?(0,i.jsxs)(i.Fragment,{children:[i.jsx("button",{onClick:()=>{c.current.stop(),m(!1)},children:i.jsx(v.Z,{})}),i.jsx(x.z,{onClick:handleSaveAndUpload,disabled:!g.length,children:"Upload"})]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx("button",{onClick:()=>{m(!0),c.current=new MediaRecorder(n.current.stream,{mimeType:"video/webm"}),c.current.addEventListener("dataavailable",handleDataAvailable),c.current.start()},children:i.jsx(w.Z,{className:"fill-red-500 stroke-none"})}),i.jsx(x.z,{onClick:handleSaveAndUpload,disabled:!g.length,children:"Upload"})]})})]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:"grid justify-items-center border-dashed border-black border rounded-lg w-[500px] bg-secondary dark:border-white",children:i.jsx("form",{onSubmit:handleSubmit,className:"",children:(0,i.jsxs)("div",{className:"grid w-full gap-10 h-full  max-w-sm items-center rounded-xl p-10",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg","shape-rendering":"geometricPrecision","text-rendering":"geometricPrecision","image-rendering":"optimizeQuality",viewBox:"0 0 512 364.92",width:150,fill:k,className:"justify-self-center",children:i.jsx("path",{"fill-rule":"nonzero",d:"M359.34 124.66c-13.56 6.7-25.71 15.36-37.41 24.9l-20.13-23.03c14.81-13.74 32.08-24.49 50.64-32.39-37.56-66.54-128.4-83.94-188.3-37.42-21.75 16.84-38.26 42.04-44.61 75.42l-2 10.43-10.4 1.84c-10.19 1.78-19.29 4.24-27.27 7.36-49.8 19.27-63.78 74.7-33.31 116.79 13.04 17.91 29.66 36.17 51.47 39.21h30.49c-.21 3-.32 6.02-.32 9.07 0 7.34.62 14.53 1.82 21.53H97.53l-1.92-.17c-30.53-3.88-55.62-26.61-73.75-51.72C-20.41 228.28.4 149.83 68.93 123.25c7.15-2.79 14.8-5.12 22.86-6.99 9.15-36.34 28.65-64.32 53.72-83.74C222.7-27.29 338.58-1.8 382.79 86.08c6.65-1.05 13.31-1.58 19.92-1.5 98.9.73 138.01 127.2 86.69 195.33-20.57 27.29-52.12 50.51-84.61 58.05l-3.41.41h-19.81a128.362 128.362 0 0 0 1.5-30.6h16.61c24.15-5.81 49.91-25.68 65.23-46.16 36.46-48.56 10.58-146.05-62.41-146.51-14.26-.12-29.11 3.33-43.16 9.56zM234.73 364.92h42.56c9.95 0 18.11-8.16 18.11-18.11v-58.64h31.04c6.54-.28 11.18-2.44 13.87-6.52 7.27-10.91-2.66-21.68-9.55-29.27-19.55-21.46-53.22-53.23-62.87-64.59-7.32-8.08-17.72-8.08-25.04 0-9.97 11.64-44.84 45.77-63.43 66.64-6.45 7.27-14.42 17.17-7.72 27.22 2.76 4.08 7.35 6.24 13.89 6.52h31.04v58.64c0 9.84 8.15 18.11 18.1 18.11z"})}),i.jsx("div",{className:"flex justify-center w-full",children:i.jsx(p._,{htmlFor:"video",className:"text-xl font-bold text-center",children:t?`Selected file: ${t.name}`:"No file selected."})}),i.jsx("input",{id:"file-input",type:"file",ref:s,style:{display:"none"},onChange:handleSubmit}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-10",children:[i.jsx("input",{id:"file-input",type:"file",ref:s,style:{display:"none"},onChange:handleSubmit}),i.jsx("div",{className:"justify-self-start",children:i.jsx(x.z,{className:" font-extrabold",onClick:()=>{s.current?.click()},children:"Upload"})}),i.jsx("div",{className:"justify-self-end",children:i.jsx(x.z,{className:" font-extrabold",onClick:()=>o(!0),children:"Record"})})]}),(0,i.jsxs)("div",{className:"grid items-center text-sm justify-items-center w-full",children:[i.jsx("div",{className:"font-semibold text-base",children:"Accepted filetypes:"}),(0,i.jsxs)("div",{className:"text-base text-center",children:[" ","MP4, WMV, MOV, and AV1"]})]})]})})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 justify-evenly gap-72",children:[i.jsx(x.z,{type:"submit",className:" px-8 font-extrabold",onClick:()=>y().back,children:"Back"}),i.jsx(x.z,{type:"submit",className:" px-8 font-extrabold",onClick:()=>y().push("/submit/Upload"),children:"Next"})]})]})]})})};s()}catch(e){s(e)}})},1841:e=>{e.exports=require("@aws-sdk/client-s3")},6936:e=>{e.exports=require("@aws-sdk/s3-request-presigner")},2132:e=>{e.exports=require("@radix-ui/react-icons")},4830:e=>{e.exports=require("aos")},1162:e=>{e.exports=require("next-themes")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},7250:e=>{e.exports=require("react-webcam")},997:e=>{e.exports=require("react/jsx-runtime")},5458:e=>{e.exports=import("@radix-ui/react-avatar")},7715:e=>{e.exports=import("@radix-ui/react-dialog")},1481:e=>{e.exports=import("@radix-ui/react-dropdown-menu")},49:e=>{e.exports=import("@radix-ui/react-label")},6774:e=>{e.exports=import("@radix-ui/react-navigation-menu")},4338:e=>{e.exports=import("@radix-ui/react-slot")},6926:e=>{e.exports=import("class-variance-authority")},6593:e=>{e.exports=import("clsx")},6197:e=>{e.exports=import("framer-motion")},4204:e=>{e.exports=import("sst/node/bucket")},8097:e=>{e.exports=import("tailwind-merge")},6113:e=>{e.exports=require("crypto")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[966,246,859,450,292],()=>__webpack_exec__(7076));module.exports=r})();